<html>
<head>
    <title>KO!</title>
    <script type="text/javascript" src="jquery.js"></script>
    <script type="text/javascript" src="ko.js"></script>

    <style>
        .fleet-commands {
            margin-bottom: 1em;
            list-style: none;
        }
    </style>
</head>
<body>
    <ul data-bind="foreach: bases">
        <li>
            <h1 data-bind="playerColor: player()">
                <span data-bind="text: name"></span>
                <small data-bind="text: player().name"></small>
            </h1>
            

            <!-- ko if: fleets().length > 0 -->
            <p>Orbiting:</p>
            <ul>
                <!-- ko foreach: ownFleets() -->
                <li data-bind="playerColor: player()">
                    <label>
                        <input type="checkbox" data-bind="value: id, checked: $parent.fleetCommand.fleets">
                        <span data-bind="text: power"></span> ships
                        (<span data-bind="text: player().name"></span>)
                        <!-- ko if: destination() -->
                        moving to <span data-bind="text: destination().name"></span>
                        <!-- /ko -->
                    </label>
                </li>
                <!-- /ko -->

                <!-- ko if: fleetCommand.fleets().length > 0 -->
                <li class='fleet-commands'>
                    <button type="button" data-bind="click: fleetCommand.garrison">
                        garrison
                    </button>

                    <button type="button" data-bind="click: fleetCommand.abort">
                        abort jump
                    </button>

                    <!-- ko foreach: inFleetRange() -->
                        <br><button type="button" data-bind="
                            text: 'Move to ' + name + '(' + distance + ')',
                            click: $parent.fleetCommand.move
                        "></button>
                    <!-- /ko -->
                </li>
                <!-- /ko -->

                <!-- ko foreach: otherFleets() -->
                <li data-bind="playerColor: player()">
                    <span data-bind="text: power"></span> ships
                    (<span data-bind="text: player().name"></span>)
                </li>
                <!-- /ko -->
            </ul>
            <!-- /ko -->

            <!-- ko if: inbound().length > 0 -->
            <p>Inbound:</p>
            <ul data-bind="foreach: inbound">
                <!-- ko if: origin() -->
                <li data-bind="playerColor: player()">
                    <span data-bind="text: power"></span> ships
                    (<span data-bind="text: player().name"></span>)
                    from <span data-bind="text: origin().name"></span>
                </li>
                <!-- /ko -->
            </ul>
            <!-- /ko -->

            <hr>
        </li>
    </ul>

    <script type="text/javascript" src="data.js"></script>
</body>
</html>